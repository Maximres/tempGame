!function(t){var e={};function a(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=9)}([function(t,e,a){},function(t,e,a){"use strict";a.r(e),a(0);const n=[{question:"58 + 15",answer:"73"},{question:"3 - 5",answer:"-2"},{question:"3 * 8",answer:"24"},{question:"13 * 11",answer:"141"},{question:"14 / 2",answer:"7"},{question:"145 ? (130 + 5 * 3)",answer:"="},{question:"1789 / 1789",answer:"1"},{question:"0 ^ 1",answer:"0"}];e.default=function(t){const e=n[function(t,e){let a=t+Math.random()*(e+1-t);return a=Math.floor(a)}(0,n.length-1)],a=document.createElement("div");a.classList.add("popUp");const i=document.createElement("h2");i.innerText=e.question.concat(" ?"),a.appendChild(i);const s=document.createElement("div");s.classList.add("flex");const r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("placeholder","Ответ..."),r.focus(),s.appendChild(r);const h=document.createElement("button");h.classList.add("answer"),h.innerHTML="ОК",s.appendChild(h),h.addEventListener("click",n=>{n.stopPropagation();let i=!1;document.querySelector('input[type="text"]').value.trim()===e.answer&&(i=!0);const s=new CustomEvent("answered",{detail:{correct:i,heals:t,bubbles:!0}});document.querySelector("body").dispatchEvent(s),document.querySelector(".pick").removeAttribute("disabled"),a.style.height=0,setTimeout(()=>document.querySelector("body").removeChild(a),100)},!1),a.appendChild(s),document.querySelector("body").appendChild(a)}},function(t,e,a){"use strict";a.r(e),a(6),e.default=class{constructor(t){this.element=document.createElement("div"),this.element.classList.add("bar"),this.element.style.left=t,this.health=document.createElement("div"),this.health.classList.add("health"),this.health.style.width="100%",this.element.appendChild(this.health)}attach(){document.querySelector("body").appendChild(this.element)}update(t){this.health.style.width=t<0?"0%":`${Math.floor(t)}%`}}},function(t,e,a){"use strict";a.r(e),a(0),e.default=class{constructor(t,e){this.element=document.createElement("div"),this.element.classList.add("popUp");const a=document.createElement("h2");a.innerText=t,this.element.appendChild(a);const n=document.createElement("button");n.innerText=e,this.element.appendChild(n)}attach(){document.querySelector("body").appendChild(this.element)}}},function(t,e,a){"use strict";a.r(e);var n=a(1);function i(t,e){let a=t+Math.random()*(e+1-t);return a=Math.floor(a)}a(5),a(0),e.default=class{constructor(){this.element=document.createElement("div"),this.element.classList.add("popUp");const t=document.createElement("h2");t.innerText="Выбери задание";const e=document.createElement("div");e.classList.add("flex");const a=["Математика"];for(let t=0;t<6;t+=1){const n=document.createElement("button");n.innerText=a[i(0,a.length-1)],t%2==0?n.classList.add("heal"):n.classList.add("damage"),e.append(n)}this.element.appendChild(t),this.element.appendChild(e),this.element.addEventListener("click",t=>{if(!t.target.classList.contains("heal")&&!t.target.classList.contains("damage"))return;const e=t.target.innerText,a=t.target.classList.contains("heal");"Математика"===e&&Object(n.default)(a),this.detach()},!1)}attach(){document.querySelector("body").appendChild(this.element)}detach(){document.querySelector("body").removeChild(this.element)}}},function(t,e,a){},function(t,e,a){},,,function(t,e,a){"use strict";a.r(e);var n=class{constructor(t,e,a,n=1){this.phase=Array.from(t),this.x=e,this.y=a,this.health=100*n,this.attack=20*n,this.currentPhase=0,this.frameNumber=0,this.isAttacking=!1}update(){this.frameNumber+=1,this.isAttacking&&this.currentPhase<7&&5===this.frameNumber&&(this.frameNumber=0,this.currentPhase+=1),7===this.currentPhase&&(this.isAttacking=!1,this.currentPhase=0)}draw(t){const e=document.querySelector("canvas");t.drawImage(this.phase[this.currentPhase],this.x,this.y,e.width/4,e.height/4),this.isAttacking&&this.update()}heal(){this.health<100&&(this.health+=10),this.health>100&&(this.health=100)}takeDamage(t){this.health-=t}triggerAttack(){this.isAttacking=!0}},i=a(4),s=a(2),r=a(3);function h(t,e){let a=t+Math.random()*(e+1-t);return a=Math.floor(a)}const c=new class{constructor(){this.backgroundSrc=`./img/background/background_${h(1,6)}.png`,document.querySelector("#layer img").src=this.backgroundSrc,this.difficulty=1;const t={maxWidth:1024,maxHeight:640,width:1024,height:640,largestProp(){return this.height>this.width?"height":"width"},readDimentions(t){return this.width=t.width,this.height=t.height,this},scalingFactor:(t,e)=>e/t,scaleToFit(){const t=this.scalingFactor(this.width,this.maxWidth),e=this.scalingFactor(this.height,this.maxHeight),a=Math.min(t,e);this.width*=a,this.height*=a}},e=[],a=[],r=h(1,2);for(let n=0;n<7;n+=1){const i=new Image;i.src=`./img/entities/player/attack_${n}.png`,e.push(i),i.onload=(()=>{t.readDimentions(i).scaleToFit();const e=document.querySelector("canvas");e.width=t.width,e.height=t.height});const s=new Image;s.src=`./img/entities/enemy/${r}/attack_${n}.png`,a.push(s)}this.player=new n(e,80,440),this.enemy=new n(a,400,440,this.difficulty);const c=document.createElement("button");c.classList.add("pick"),c.innerText="Выбери заклинание",c.addEventListener("click",t=>{t.target.setAttribute("disabled",!0),(new i.default).attach()},!1),document.querySelector("body").appendChild(c),this.playerBar=new s.default("20%"),this.playerBar.attach(),this.enemyBar=new s.default("60%"),this.enemyBar.attach()}draw(t){this.player.draw(t),this.enemy.draw(t)}healPlayer(t){t?(this.player.heal(),this.playerBar.update(this.player.health),this.checkHealth()):this.dealDamage(t)}dealDamage(t){t?(this.player.triggerAttack(),this.enemy.takeDamage(this.player.attack),this.enemyBar.update(this.enemy.health)):(this.enemy.triggerAttack(),this.player.takeDamage(this.enemy.attack),this.playerBar.update(this.player.health)),this.checkHealth()}checkHealth(){this.player.health<=0&&new r.default("You lost","Отомстить").attach(),this.enemy.health<=0&&new r.default("You won","К след. врагу").attach()}},l=document.querySelector("canvas"),o=l.getContext("2d");document.querySelector("body").addEventListener("answered",t=>{t.detail.heals?c.healPlayer(t.detail.correct):c.dealDamage(t.detail.correct)},!1),function t(){requestAnimationFrame(t),o.clearRect(0,0,l.width,l.height),c.draw(o)}()}]);